/*! findagroupforme 2014-11-16 */
angular.module("MyApp",["ngCookies","ngResource","ngMessages","ngRoute"]).config(["$locationProvider","$routeProvider",function(a,b){b.when("/",{templateUrl:"/app/views/home.html",controller:"HomeCtrl"}).when("/404",{templateUrl:"/app/views/404.html"}).when("/signup",{templateUrl:"/app/views/login.html"}).when("/about",{templateUrl:"/app/views/about.html"}).when("/users",{templateUrl:"/app/views/users.html",controller:"UsersCtrl"}).when("/users/:id",{templateUrl:"/app/views/user/user.html",controller:"UserCtrl"}).when("/groups",{templateUrl:"/app/views/groups.html",controller:"GroupsCtrl"}).when("/groups/:id",{templateUrl:"/app/views/group/group.html",controller:"GroupCtrl"}).when("/groups/:id/edit",{templateUrl:"/app/views/group/group.edit.html",controller:"GroupEditCtrl"}).when("/group/create",{templateUrl:"/app/views/group/group.create.html",controller:"GroupCreateCtrl"}).otherwise({redirectTo:"/404"})}]),angular.module("MyApp").controller("GroupCreateCtrl",["$scope","$rootScope","$location","Group",function(a,b,c,d){a.createGroup=function(){d.save({name:a.name,activity:a.activity,venue_location:[a.locationLat,a.locationLong]}).$promise.then(function(a){alert("Group has been added!"),c.path("/groups/"+a._id)})}}]),angular.module("MyApp").controller("GroupEditCtrl",["$scope","$rootScope","$routeParams","Group",function(a,b,c,d){d.get({_id:c.id},function(b){a.group=b}),a.editGroup=function(){d.update({_id:c.id,name:a.group.name,activity:a.group.activity,venue_location:[a.group.venue_location[0],a.group.venue_location[1]],date_created:a.group.date_created}).$promise.then(function(){})}}]),angular.module("MyApp").controller("GroupCtrl",["$scope","$cookieStore","$location","$routeParams","Group",function(a,b,c,d,e){e.get({_id:d.id},function(b){a.group=b}),a.editButton=function(){console.log("/groups/"+d.id+"/edit"),c.path("/groups/"+d.id+"/edit")},a.deleteButton=function(){e.remove({_id:d.id}).$promise.then(function(){alert("Group has been deleted!"),c.path("/")})}}]),angular.module("MyApp").controller("GroupsCtrl",["$scope","Group",function(a,b){a.groups=b.query()}]),angular.module("MyApp").controller("HomeCtrl",["$scope","$cookieStore",function(a,b){a.auth=b.get("userid")}]),angular.module("MyApp").controller("UserCtrl",["$scope","$rootScope","$routeParams","User",function(a,b,c,d){d.get({_id:c.id},function(b){a.user=b})}]),angular.module("MyApp").controller("UsersCtrl",["$scope","User",function(a,b){a.users=b.query()}]),angular.module("MyApp").factory("Group",["$resource",function(a){return a("/api/groups/:_id",{},{update:{method:"PUT",params:{_id:"@_id"}}})}]),angular.module("MyApp").factory("User",["$resource",function(a){return a("/api/users/:_id")}]);